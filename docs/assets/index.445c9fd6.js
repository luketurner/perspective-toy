(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))E(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&E(a)}).observe(document,{childList:!0,subtree:!0});function c(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function E(r){if(r.ep)return;r.ep=!0;const l=c(r);fetch(r.href,l)}})();function A(P){const u={horizonY:400,vp1X:400,vp2X:200,type:"1p",cubeDepth:.25},c=P.elCanvas.getContext("2d");O(P.elInputPerspectiveType,"change","type"),O(P.elInputHorizon,"input","horizonY"),O(P.elInputVanishingPointOne,"input","vp1X"),O(P.elInputVanishingPointTwo,"input","vp2X");function E(){$(),H(),u.type==="1p"?r(350,600,100):l(400,600,100)}function r(e,n,t){S(1),p(e,n,1),p(e,n+t,1),p(e+t,n,1),p(e+t,n+t,1);const i=u.cubeDepth,[s,f]=a(e,n,i,1),[v,g]=a(e+t,n,i,1),[d,b]=a(e,n+t,i,1),[m,I]=a(e+t,n+t,i,1);N(e,n,t,t),o(e,n,s,f),o(e+t,n,v,g),o(e,n+t,d,b),o(e+t,n+t,m,I),o(s,f,v,g),o(s,f,d,b),o(v,g,m,I),o(d,b,m,I)}function l(e,n,t){S(1),S(2),o(e,n,e,n+t),p(e,n,1),p(e,n+t,1),p(e,n,2),p(e,n+t,2);const i=u.cubeDepth,[s,f]=Y(1),[v,g]=Y(2),[d,b]=a(e,n,i,1),[m,I]=a(e,n,i,2),[h,y]=a(e,n+t,i,1),[V,X]=a(e,n+t,i,2),[z,L]=B(d,b,v,g,m,I,s,f),[T,k]=B(h,y,v,g,V,X,s,f);p(z,L,1),p(z,L,2),p(T,k,1),p(T,k,2),o(e,n,d,b),o(e,n,m,I),o(d,b,z,L),o(m,I,z,L),o(e,n+t,h,y),o(e,n+t,V,X),o(h,y,T,k),o(V,X,T,k),o(d,b,h,y),o(m,I,V,X),o(z,L,T,k)}function a(e,n,t,i){const[s,f]=Y(i),v=(s-e)*t,g=(f-n)*t;return[e+v,n+g]}function B(e,n,t,i,s,f,v,g){const[d,b]=C(e,n,t,i),[m,I]=C(s,f,v,g),h=(I-b)/(d-m),y=d*h+b;return[h,y]}function C(e,n,t,i){const s=(i-n)/(t-e),f=n-s*e;return[s,f]}function Y(e){return[u[`vp${e}X`],u.horizonY]}function p(e,n,t){o(e,n,u[`vp${t}X`],u.horizonY,"grey")}function H(){o(0,u.horizonY,c.canvas.width,u.horizonY,"grey")}function S(e){R(u[`vp${e}X`],u.horizonY)}function N(e,n,t,i,s="black"){c.beginPath(),c.rect(e,n,t,i),c.strokeStyle=s,c.stroke()}function o(e,n,t,i,s="black"){c.beginPath(),c.moveTo(e,n),c.lineTo(t,i),c.strokeStyle=s,c.stroke()}function R(e,n,t="black"){c.beginPath(),c.ellipse(e,n,2,2,0,0,2*Math.PI),c.fillStyle=t,c.fill()}function $(){c.clearRect(0,0,c.canvas.width,c.canvas.height)}function O(e,n,t){e.addEventListener(n,i=>D({[t]:i.target.value})),D({[t]:e.value})}function D(e={}){Object.assign(u,e),E()}}A({elCanvas:document.getElementById("main-canvas"),elInputPerspectiveType:document.getElementById("perspective-type"),elInputHorizon:document.getElementById("horizon-input"),elInputVanishingPointOne:document.getElementById("vp1-input"),elInputVanishingPointTwo:document.getElementById("vp2-input")});
